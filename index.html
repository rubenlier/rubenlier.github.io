<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruben's Profile</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #fff;
            color: #333;
        }
        .navbar {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            border-bottom: 1px solid #ccc;
            justify-content: flex-start;
        }
        .navbar-inner {
            margin-left: 250px; /* align with sidebar */
        }
        .navbar a {
            text-decoration: none;
            color: #333;
            font-size: 1em;
            margin-right: 20px;
        }
        .navbar a.active {
            font-weight: bold;
        }
        .navbar a:hover {
            text-decoration: underline;
        }
        .layout {
            display: flex;
            height: calc(100vh - 60px);
        }
        .sidebar {
            width: 250px;
            border-right: 1px solid #ccc;
            padding: 20px;
        }
        .sidebar img {
            width: 100%;
            margin-bottom: 20px;
        }
        .social-links {
            list-style: none;
            padding: 0;
        }
        .social-links li {
            margin-bottom: 15px;
        }
        .social-links a {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #333;
        }
        .social-links a img {
            width: 14px;
            height: 14px;
            margin-right: 10px;
            position: relative;
            top: 10px;
        }
        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        .content h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .content p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        .simulation-image {
            max-width: 100%;
            border: 1px solid #ccc;
            margin-top: 20px;
        }

        /* Optional: styles for preprints snippet */
        .paper {
            margin: 16px 0;
        }
        .paper h3 {
            margin-bottom: 4px;
        }
        .bold {
            font-weight: bold;
        }

        /* Talks map */
        .map-container {
            position: relative;
            width: 100%;
            max-width: none;
            margin-top: 20px;
        }
        .world-map {
            width: 100%;
            display: block;
        }
        .flag-emoji {
            position: absolute;
            cursor: pointer;
            transform: translate(-50%, -50%);
        }
        .flag-emoji::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 50%;
            bottom: 120%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.15s ease-in-out;
        }
        .flag-emoji:hover::after {
            opacity: 1;
        }

        /* Holdenator styles */

        .holden-form {
            display: flex;
            gap: 10px;
            margin-bottom: 0.75rem;
        }

        .holden-input {
            flex: 1;
            padding: 10px 12px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 1rem;
        }

        .holden-button {
            padding: 10px 16px;
            border: none;
            border-radius: 4px;
            background-color: #222;
            color: #fff;
            cursor: pointer;
            font-size: 1rem;
            white-space: nowrap;
        }

        .holden-button:disabled {
            opacity: 0.6;
            cursor: default;
        }

        .holden-status {
            min-height: 1.2em;
            font-size: 0.9rem;
            color: #777;
        }

        .holden-output {
            margin-top: 20px;
        }

        .holden-image-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }

        .holden-image {
            max-width: 220px;
            height: auto;
            flex-shrink: 0;
        }

        .holden-speech-bubble {
            position: relative;
            background: #f5f5f5;
            border-radius: 16px;
            padding: 12px 14px;
            max-width: 100%;
            min-height: 80px;
            font-size: 0.95rem;
            line-height: 1.4;
            border: 1px solid #ddd;
        }

        .holden-speech-bubble::before {
            content: "";
            position: absolute;
            left: -12px;
            top: 40%;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 12px solid #f5f5f5;
        }

        .holden-speech-bubble::after {
            content: "";
            position: absolute;
            left: -13px;
            top: 40%;
            border-top: 9px solid transparent;
            border-bottom: 9px solid transparent;
            border-right: 13px solid #ddd;
        }

        .holden-response {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        @media (max-width: 600px) {
            .holden-image-wrapper {
                flex-direction: column;
                align-items: center;
            }

            .holden-speech-bubble {
                margin-top: 10px;
            }

            .holden-speech-bubble::before,
            .holden-speech-bubble::after {
                left: 30px;
                top: -14px;
                border-right: 8px solid transparent;
                border-left: 8px solid transparent;
                border-bottom: 12px solid #f5f5f5;
            }

            .holden-speech-bubble::after {
                top: -15px;
                border-bottom-color: #ddd;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <div class="navbar">
        <div class="navbar-inner">
            <a href="#home" data-page="home">Ruben Lier</a>
            <a href="#preprints" data-page="preprints">Preprints</a>
            <a href="#talks" data-page="talks">Talks</a>
            <a href="#holdenator" data-page="holdenator">Holdenator</a>
        </div>
    </div>

    <!-- Layout -->
    <div class="layout">
        <!-- Sidebar (shared for all pages) -->
        <div class="sidebar">
            <img src="foto save ruben.PNG" alt="Ruben's Picture">
            <ul class="social-links">
                <li><a href="https://www.uva.nl/en/profile/l/i/r.lier/r.lier.html" target="_blank">
                    <img src="uvalogo.png" alt="Contact"><span>Contact</span></a></li>
                <li><a href="https://scholar.google.com/citations?user=jN3gPNkAAAAJ&hl=nl" target="_blank">
                    <img src="scholarlogo.png" alt="Google Scholar"><span>Google Scholar</span></a></li>
                <li><a href="https://nl.linkedin.com/in/ruben-lier-b228b2182" target="_blank">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png" alt="LinkedIn"><span>LinkedIn</span></a></li>
                <li><a href="https://www.goodreads.com/user/show/131725587-ruben-lier" target="_blank">
                    <img src="goodreads.png" alt="Goodreads"><span>Goodreads</span></a></li>
                <li><a href="https://github.com/rubenlier" target="_blank">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/c/c2/GitHub_Invertocat_Logo.svg" alt="GitHub"><span>GitHub</span></a></li>
                <li><a href="https://open.spotify.com/playlist/4nSMm8TaDVlrNi4u9rzImQ" target="_blank">
                    <img src="spotify.png" alt="Spotify"><span>Spotify</span></a></li>
            </ul>
        </div>

        <!-- Main content area that changes per "page" -->
        <div class="content" id="content"></div>
    </div>

    <script>
        // TODO: later, just replace this with your actual API URL
        // e.g. "https://gpt2-lora-api-12345.europe-west4.run.app/generate"
        const HOLDEN_API_URL = "https://YOUR-CLOUD-RUN-URL-HERE";

        // Pages are HTML snippets injected into #content
        const pages = {
            home: `
                <h1>About me</h1>
                <p>
                    I am a theoretical physicist at the University of Amsterdam, specialized in problems
                    related to hydrodynamics, ranging from astrophysics to condensed matter physics and
                    from biophysics to high-energy physics.
                </p>
                <p>
                    Click "Preprints" in the top bar to learn about my recent scientific work.
                    Click "Talks" to see all the talks I have given.
                </p>
                <p>
                    Below is an animation of a numerical simulation that was part of my
                    <a href="https://journals.aps.org/prd/abstract/10.1103/stvc-tzfh" target="_blank">work</a> on magnetohydrodynamics.
                </p>
                <img src="animation.gif" alt="Hydrodynamic simulation" class="simulation-image">
            `,

            preprints: `
                <h1>My latest arXiv preprints</h1>
                <div id="preprints-container">
                    Loading latest arXiv papersâ€¦
                </div>
            `,

            talks: `
                <h1>Talks</h1>
                <p>
                    Hover your mouse over the flags to see when and where I have given a talk.
                </p>
                <div class="map-container">
                    <img class="world-map" src="equirel.jpg" alt="World Map" />

                    <!-- Flags: formula used: 100*{(90 - y)/180 - 0.052, (180 + x)/360 - 0.01} -->
                    <div class="flag-emoji" style="top: 17.70%; left: 48.90%;" data-tooltip="Odd Viscoelasticity Workshop (DIEP) â€“ 1 April 2022">ðŸš©</div>
                    <div class="flag-emoji" style="top: 19.00%; left: 48.90%;" data-tooltip="NWO Physics â€“ 23 Feb 2025">ðŸš©</div>
                    <div class="flag-emoji" style="top: 18.20%; left: 50.30%;" data-tooltip="Max Planck Institute for Dynamics and Self-Organization â€“ 17 Sep 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 18.40%; left: 51.30%;" data-tooltip="Max Planck Institute for the Physics of Complex Systems â€“ 21 Sep 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 18.40%; left: 52.20%;" data-tooltip="WrocÅ‚aw University of Science and Technology â€“ 24 Jan 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 13.80%; left: 52.50%;" data-tooltip="Hydrodynamics at all scales (Nordita) â€“ 8 Sep 2023">ðŸš©</div>
                    <div class="flag-emoji" style="top: 20.30%; left: 13.50%;" data-tooltip="University of Washington â€“ 22 Nov 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 19.90%; left: 12.20%;" data-tooltip="University of Victoria â€“ 26 Nov 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 19.40%; left: 13.30%;" data-tooltip="University of British Columbia â€“ 15 Nov 2024">ðŸš©</div>
                    <div class="flag-emoji" style="top: 28.00%; left: 14.70%;" data-tooltip="APS Global Physics Summit â€“ 17 March 2025">ðŸš©</div>
                    <div class="flag-emoji" style="top: 20.10%; left: 48.05%;" data-tooltip="Institut Curie â€“ 15 May 2025">ðŸš©</div>
                    <div class="flag-emoji" style="top: 17.00%; left: 48.50%;" data-tooltip="DIEP Seminar (Amsterdam) â€“ 11 Sep 2025">ðŸš©</div>
                    <div class="flag-emoji" style="top: 23.00%; left: 50.50%;" data-tooltip="UniversitÃ  di Genova â€“ 29 Oct 2025">ðŸš©</div>
                </div>
            `,

            holdenator: `
                <h1>Holdenator</h1>
                <p>Type something below and let Holden ramble about it.</p>

                <form id="holden-form" class="holden-form" autocomplete="off">
                    <input
                        id="holden-input"
                        class="holden-input"
                        type="text"
                        placeholder="Ask Holden something..."
                        required
                    />
                    <button type="submit" id="holden-submit" class="holden-button">
                        Talk to Holden
                    </button>
                </form>

                <p class="holden-status" id="holden-status"></p>

                <div class="holden-output">
                    <div class="holden-image-wrapper">
                        <img
                            src="holden.jpg"
                            alt="Holden Caulfield"
                            class="holden-image"
                        />
                        <div class="holden-speech-bubble">
                            <div id="holden-response" class="holden-response">
                                Iâ€™ll say something once you give me a prompt.
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        async function loadPreprintsSnippet() {
            const container = document.getElementById('preprints-container');
            if (!container) return;

            try {
                const response = await fetch('paper.html', { cache: 'no-cache' });
                if (!response.ok) {
                    container.innerHTML = '<p>Could not load preprints at the moment.</p>';
                    return;
                }
                const html = await response.text();
                container.innerHTML = html;
            } catch (err) {
                console.error(err);
                container.innerHTML = '<p>Error loading preprints.</p>';
            }
        }

        function initHoldenatorPage() {
            const form = document.getElementById("holden-form");
            if (!form) return; // not on this page

            const input = document.getElementById("holden-input");
            const button = document.getElementById("holden-submit");
            const responseEl = document.getElementById("holden-response");
            const statusEl = document.getElementById("holden-status");

            form.addEventListener("submit", async (event) => {
                event.preventDefault();

                const prompt = input.value.trim();
                if (!prompt) return;

                // If API URL is still placeholder, just show a message and bail early
                if (!HOLDEN_API_URL || HOLDEN_API_URL.includes("YOUR-CLOUD-RUN-URL-HERE")) {
                    responseEl.textContent =
                        "Holden will start talking once Ruben plugs in the API URL.";
                    statusEl.textContent = "API not connected yet.";
                    return;
                }

                button.disabled = true;
                statusEl.textContent = "Holden is thinking...";
                responseEl.textContent = "â€¦";

                try {
                    const res = await fetch(HOLDEN_API_URL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ prompt })
                    });

                    if (!res.ok) {
                        throw new Error("API error: " + res.status);
                    }

                    const data = await res.json();

                    // TODO: once you know the exact response shape, set this field
                    // For example, if your FastAPI returns {"text": "..."}:
                    // const text = data.text;
                    const text =
                        data.text ||
                        data.completion ||
                        data.output ||
                        JSON.stringify(data, null, 2);

                    responseEl.textContent = text;
                    statusEl.textContent = "";
                } catch (err) {
                    console.error(err);
                    responseEl.textContent =
                        "Sorry, Holdenâ€™s having a breakdown and canâ€™t answer right now.";
                    statusEl.textContent = "Error talking to the API.";
                } finally {
                    button.disabled = false;
                }
            });
        }

        function setActiveLink(page) {
            document.querySelectorAll('.navbar a[data-page]').forEach(a => {
                if (a.dataset.page === page) {
                    a.classList.add('active');
                } else {
                    a.classList.remove('active');
                }
            });
        }

        function loadPage(page) {
            const contentDiv = document.getElementById('content');
            if (!pages[page]) {
                page = 'home'; // fallback
            }
            contentDiv.innerHTML = pages[page];
            setActiveLink(page);

            if (page === 'preprints') {
                loadPreprintsSnippet();
            } else if (page === 'holdenator') {
                initHoldenatorPage();
            }
        }

        function getPageFromHash() {
            const hash = window.location.hash.replace('#', '');
            return hash || 'home';
        }

        window.addEventListener('hashchange', () => {
            loadPage(getPageFromHash());
        });

        // Initial load
        loadPage(getPageFromHash());
    </script>
</body>
</html>
